<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AREA: README</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AREA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">README</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><div align="center"> <a href="https://github.com/webpack/webpack"><img src="https://webpack.js.org/assets/icon-square-big.svg" alt="" style="pointer-events: none;" width="200" height="200" class="inline"/> </a> </div><p><a href="https://npmjs.com/package/terser-webpack-plugin"><img src="https://img.shields.io/npm/v/terser-webpack-plugin.svg" alt="npm" style="pointer-events: none;" class="inline"/></a> <a href="https://nodejs.org"><img src="https://img.shields.io/node/v/terser-webpack-plugin.svg" alt="node" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/webpack-contrib/terser-webpack-plugin/actions"><img src="https://github.com/webpack-contrib/terser-webpack-plugin/workflows/terser-webpack-plugin/badge.svg" alt="tests" style="pointer-events: none;" class="inline"/></a> <a href="https://codecov.io/gh/webpack-contrib/terser-webpack-plugin"><img src="https://codecov.io/gh/webpack-contrib/terser-webpack-plugin/branch/master/graph/badge.svg" alt="cover" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/webpack/webpack/discussions"><img src="https://img.shields.io/github/discussions/webpack/webpack" alt="discussion" class="inline"/></a> <a href="https://packagephobia.now.sh/result?p=terser-webpack-plugin"><img src="https://packagephobia.now.sh/badge?p=terser-webpack-plugin" alt="size" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md25232"></a>
terser-webpack-plugin</h1>
<p>This plugin uses <a href="https://github.com/terser/terser">terser</a> to minify/minimize your JavaScript.</p>
<h2><a class="anchor" id="autotoc_md25233"></a>
Getting Started</h2>
<p>Webpack v5 comes with the latest <code>terser-webpack-plugin</code> out of the box. If you are using Webpack v5 or above and wish to customize the options, you will still need to install <code>terser-webpack-plugin</code>. Using Webpack v4, you have to install <code>terser-webpack-plugin</code> v4.</p>
<p>To begin, you'll need to install <code>terser-webpack-plugin</code>:</p>
<div class="fragment"><div class="line">npm install terser-webpack-plugin --save-dev</div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line">yarn add -D terser-webpack-plugin</div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line">pnpm add -D terser-webpack-plugin</div>
</div><!-- fragment --><p>Then add the plugin to your <code>webpack</code> config. For example:</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">const TerserPlugin = require(&quot;terser-webpack-plugin&quot;);</div>
<div class="line"> </div>
<div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [new TerserPlugin()],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><p>And run <code>webpack</code> via your preferred method.</p>
<h2><a class="anchor" id="autotoc_md25234"></a>
Note about source maps</h2>
<p>**Works only with <code>source-map</code>, <code>inline-source-map</code>, <code>hidden-source-map</code> and <code>nosources-source-map</code> values for the <a href="https://webpack.js.org/configuration/devtool/"><code>devtool</code></a> option.**</p>
<p>Why?</p>
<ul>
<li><code>eval</code> wraps modules in <code>eval("string")</code> and the minimizer does not handle strings.</li>
<li><code>cheap</code> has not column information and minimizer generate only a single line, which leave only a single mapping.</li>
</ul>
<p>Using supported <code>devtool</code> values enable source map generation.</p>
<h2><a class="anchor" id="autotoc_md25235"></a>
Options</h2>
<ul>
<li>**`test`**</li>
<li>**`include`**</li>
<li>**`exclude`**</li>
<li>**`parallel`**</li>
<li>**`minify`**</li>
<li>**`terserOptions`**</li>
<li>**`extractComments`**</li>
</ul>
<h3><a class="anchor" id="autotoc_md25236"></a>
<code>test</code></h3>
<p>Type:</p>
<div class="fragment"><div class="line">type test = string | RegExp | Array&lt;string | RegExp&gt;;</div>
</div><!-- fragment --><p>Default: <code>/\.m?js(\?.*)?$/i</code></p>
<p>Test to match files against.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        test: /\.js(\?.*)?$/i,</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25237"></a>
<code>include</code></h3>
<p>Type:</p>
<div class="fragment"><div class="line">type include = string | RegExp | Array&lt;string | RegExp&gt;;</div>
</div><!-- fragment --><p>Default: <code>undefined</code></p>
<p>Files to include.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        include: /\/includes/,</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25238"></a>
<code>exclude</code></h3>
<p>Type:</p>
<div class="fragment"><div class="line">type exclude = string | RegExp | Array&lt;string | RegExp&gt;;</div>
</div><!-- fragment --><p>Default: <code>undefined</code></p>
<p>Files to exclude.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        exclude: /\/excludes/,</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25239"></a>
<code>parallel</code></h3>
<p>Type:</p>
<div class="fragment"><div class="line">type parallel = boolean | number;</div>
</div><!-- fragment --><p>Default: <code>true</code></p>
<p>Use multi-process parallel running to improve the build speed. Default number of concurrent runs: <code>os.cpus().length - 1</code>.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Note</b></p>
<p>Parallelization can speedup your build significantly and is therefore <b>highly recommended</b>. </p>
</blockquote>
<blockquote class="doxtable">
<p>&zwj;<b>Warning</b></p>
<p>If you use <b>Circle CI</b> or any other environment that doesn't provide real available count of CPUs then you need to setup explicitly number of CPUs to avoid <code>Error: Call retries were exceeded</code> (see <a href="https://github.com/webpack-contrib/terser-webpack-plugin/issues/143">#143</a>, <a href="https://github.com/webpack-contrib/terser-webpack-plugin/issues/202">#202</a>). </p>
</blockquote>
<h4><a class="anchor" id="autotoc_md25240"></a>
<code>boolean</code></h4>
<p>Enable/disable multi-process parallel running.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        parallel: true,</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md25241"></a>
<code>number</code></h4>
<p>Enable multi-process parallel running and set number of concurrent runs.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        parallel: 4,</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25242"></a>
<code>minify</code></h3>
<p>Type:</p>
<div class="fragment"><div class="line">type minify = (</div>
<div class="line">  input: {</div>
<div class="line">    [file: string]: string;</div>
<div class="line">  },</div>
<div class="line">  sourceMap: import(&quot;@jridgewell/trace-mapping&quot;).SourceMapInput | undefined,</div>
<div class="line">  minifyOptions: {</div>
<div class="line">    module?: boolean | undefined;</div>
<div class="line">    ecma?: import(&quot;terser&quot;).ECMA | undefined;</div>
<div class="line">  },</div>
<div class="line">  extractComments:</div>
<div class="line">    | boolean</div>
<div class="line">    | &quot;all&quot;</div>
<div class="line">    | &quot;some&quot;</div>
<div class="line">    | RegExp</div>
<div class="line">    | ((</div>
<div class="line">        astNode: any,</div>
<div class="line">        comment: {</div>
<div class="line">          value: string;</div>
<div class="line">          type: &quot;comment1&quot; | &quot;comment2&quot; | &quot;comment3&quot; | &quot;comment4&quot;;</div>
<div class="line">          pos: number;</div>
<div class="line">          line: number;</div>
<div class="line">          col: number;</div>
<div class="line">        }</div>
<div class="line">      ) =&gt; boolean)</div>
<div class="line">    | {</div>
<div class="line">        condition?:</div>
<div class="line">          | boolean</div>
<div class="line">          | &quot;all&quot;</div>
<div class="line">          | &quot;some&quot;</div>
<div class="line">          | RegExp</div>
<div class="line">          | ((</div>
<div class="line">              astNode: any,</div>
<div class="line">              comment: {</div>
<div class="line">                value: string;</div>
<div class="line">                type: &quot;comment1&quot; | &quot;comment2&quot; | &quot;comment3&quot; | &quot;comment4&quot;;</div>
<div class="line">                pos: number;</div>
<div class="line">                line: number;</div>
<div class="line">                col: number;</div>
<div class="line">              }</div>
<div class="line">            ) =&gt; boolean)</div>
<div class="line">          | undefined;</div>
<div class="line">        filename?: string | ((fileData: any) =&gt; string) | undefined;</div>
<div class="line">        banner?:</div>
<div class="line">          | string</div>
<div class="line">          | boolean</div>
<div class="line">          | ((commentsFile: string) =&gt; string)</div>
<div class="line">          | undefined;</div>
<div class="line">      }</div>
<div class="line">    | undefined</div>
<div class="line">) =&gt; Promise&lt;{</div>
<div class="line">  code: string;</div>
<div class="line">  map?: import(&quot;@jridgewell/trace-mapping&quot;).SourceMapInput | undefined;</div>
<div class="line">  errors?: (string | Error)[] | undefined;</div>
<div class="line">  warnings?: (string | Error)[] | undefined;</div>
<div class="line">  extractedComments?: string[] | undefined;</div>
<div class="line">}&gt;;</div>
</div><!-- fragment --><p>Default: <code>TerserPlugin.terserMinify</code></p>
<p>Allows you to override default minify function. By default plugin uses <a href="https://github.com/terser/terser">terser</a> package. Useful for using and testing unpublished versions or forks.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Warning</b></p>
<p><b>Always use <code>require</code> inside <code>minify</code> function when <code>parallel</code> option enabled</b>. </p>
</blockquote>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">// Can be async</div>
<div class="line">const minify = (input, sourceMap, minimizerOptions, extractsComments) =&gt; {</div>
<div class="line">  // The `minimizerOptions` option contains option from the `terserOptions` option</div>
<div class="line">  // You can use `minimizerOptions.myCustomOption`</div>
<div class="line"> </div>
<div class="line">  // Custom logic for extract comments</div>
<div class="line">  const { map, code } = require(&quot;uglify-module&quot;) // Or require(&#39;./path/to/uglify-module&#39;)</div>
<div class="line">    .minify(input, {</div>
<div class="line">      /* Your options for minification */</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">  return { map, code, warnings: [], errors: [], extractedComments: [] };</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">// Used to regenerate `fullhash`/`chunkhash` between different implementation</div>
<div class="line">// Example: you fix a bug in custom minimizer/custom function, but unfortunately webpack doesn&#39;t know about it, so you will get the same fullhash/chunkhash</div>
<div class="line">// to avoid this you can provide version of your custom minimizer</div>
<div class="line">// You don&#39;t need if you use only `contenthash`</div>
<div class="line">minify.getMinimizerVersion = () =&gt; {</div>
<div class="line">  let packageJson;</div>
<div class="line"> </div>
<div class="line">  try {</div>
<div class="line">    // eslint-disable-next-line global-require, import/no-extraneous-dependencies</div>
<div class="line">    packageJson = require(&quot;uglify-module/package.json&quot;);</div>
<div class="line">  } catch (error) {</div>
<div class="line">    // Ignore</div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">  return packageJson &amp;&amp; packageJson.version;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        terserOptions: {</div>
<div class="line">          myCustomOption: true,</div>
<div class="line">        },</div>
<div class="line">        minify,</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25243"></a>
<code>terserOptions</code></h3>
<p>Type:</p>
<div class="fragment"><div class="line">type terserOptions = {</div>
<div class="line">  compress?: boolean | CompressOptions;</div>
<div class="line">  ecma?: ECMA;</div>
<div class="line">  enclose?: boolean | string;</div>
<div class="line">  ie8?: boolean;</div>
<div class="line">  keep_classnames?: boolean | RegExp;</div>
<div class="line">  keep_fnames?: boolean | RegExp;</div>
<div class="line">  mangle?: boolean | MangleOptions;</div>
<div class="line">  module?: boolean;</div>
<div class="line">  nameCache?: object;</div>
<div class="line">  format?: FormatOptions;</div>
<div class="line">  /** @deprecated */</div>
<div class="line">  output?: FormatOptions;</div>
<div class="line">  parse?: ParseOptions;</div>
<div class="line">  safari10?: boolean;</div>
<div class="line">  sourceMap?: boolean | SourceMapOptions;</div>
<div class="line">  toplevel?: boolean;</div>
<div class="line">};</div>
</div><!-- fragment --><p>Default: <a href="https://github.com/terser/terser#minify-options">default</a></p>
<p>Terser <a href="https://github.com/terser/terser#minify-options">options</a>.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        terserOptions: {</div>
<div class="line">          ecma: undefined,</div>
<div class="line">          parse: {},</div>
<div class="line">          compress: {},</div>
<div class="line">          mangle: true, // Note `mangle.properties` is `false` by default.</div>
<div class="line">          module: false,</div>
<div class="line">          // Deprecated</div>
<div class="line">          output: null,</div>
<div class="line">          format: null,</div>
<div class="line">          toplevel: false,</div>
<div class="line">          nameCache: null,</div>
<div class="line">          ie8: false,</div>
<div class="line">          keep_classnames: undefined,</div>
<div class="line">          keep_fnames: false,</div>
<div class="line">          safari10: false,</div>
<div class="line">        },</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25244"></a>
<code>extractComments</code></h3>
<p>Type:</p>
<div class="fragment"><div class="line">type extractComments =</div>
<div class="line">  | boolean</div>
<div class="line">  | string</div>
<div class="line">  | RegExp</div>
<div class="line">  | ((</div>
<div class="line">      astNode: any,</div>
<div class="line">      comment: {</div>
<div class="line">        value: string;</div>
<div class="line">        type: &quot;comment1&quot; | &quot;comment2&quot; | &quot;comment3&quot; | &quot;comment4&quot;;</div>
<div class="line">        pos: number;</div>
<div class="line">        line: number;</div>
<div class="line">        col: number;</div>
<div class="line">      }</div>
<div class="line">    ) =&gt; boolean)</div>
<div class="line">  | {</div>
<div class="line">      condition?:</div>
<div class="line">        | boolean</div>
<div class="line">        | &quot;all&quot;</div>
<div class="line">        | &quot;some&quot;</div>
<div class="line">        | RegExp</div>
<div class="line">        | ((</div>
<div class="line">            astNode: any,</div>
<div class="line">            comment: {</div>
<div class="line">              value: string;</div>
<div class="line">              type: &quot;comment1&quot; | &quot;comment2&quot; | &quot;comment3&quot; | &quot;comment4&quot;;</div>
<div class="line">              pos: number;</div>
<div class="line">              line: number;</div>
<div class="line">              col: number;</div>
<div class="line">            }</div>
<div class="line">          ) =&gt; boolean)</div>
<div class="line">        | undefined;</div>
<div class="line">      filename?: string | ((fileData: any) =&gt; string) | undefined;</div>
<div class="line">      banner?:</div>
<div class="line">        | string</div>
<div class="line">        | boolean</div>
<div class="line">        | ((commentsFile: string) =&gt; string)</div>
<div class="line">        | undefined;</div>
<div class="line">    };</div>
</div><!-- fragment --><p>Default: <code>true</code></p>
<p>Whether comments shall be extracted to a separate file, (see <a href="https://github.com/webpack/webpack/commit/71933e979e51c533b432658d5e37917f9e71595a">details</a>). By default extract only comments using <code>/^\**!|@preserve|@license|@cc_on/i</code> regexp condition and remove remaining comments. If the original file is named <code>foo.js</code>, then the comments will be stored to <code>foo.js.LICENSE.txt</code>. The <code>terserOptions.format.comments</code> option specifies whether the comment will be preserved, i.e. it is possible to preserve some comments (e.g. annotations) while extracting others or even preserving comments that have been extracted.</p>
<h4><a class="anchor" id="autotoc_md25245"></a>
<code>boolean</code></h4>
<p>Enable/disable extracting comments.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        extractComments: true,</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md25246"></a>
<code>string</code></h4>
<p>Extract <code>all</code> or <code>some</code> (use <code>/^\**!|@preserve|@license|@cc_on/i</code> RegExp) comments.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        extractComments: &quot;all&quot;,</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md25247"></a>
<code>RegExp</code></h4>
<p>All comments that match the given expression will be extracted to the separate file.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        extractComments: /@extract/i,</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md25248"></a>
<code>function</code></h4>
<p>All comments that match the given expression will be extracted to the separate file.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        extractComments: (astNode, comment) =&gt; {</div>
<div class="line">          if (/@extract/i.test(comment.value)) {</div>
<div class="line">            return true;</div>
<div class="line">          }</div>
<div class="line"> </div>
<div class="line">          return false;</div>
<div class="line">        },</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md25249"></a>
<code>object</code></h4>
<p>Allow to customize condition for extract comments, specify extracted file name and banner.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        extractComments: {</div>
<div class="line">          condition: /^\**!|@preserve|@license|@cc_on/i,</div>
<div class="line">          filename: (fileData) =&gt; {</div>
<div class="line">            // The &quot;fileData&quot; argument contains object with &quot;filename&quot;, &quot;basename&quot;, &quot;query&quot; and &quot;hash&quot;</div>
<div class="line">            return `${fileData.filename}.LICENSE.txt${fileData.query}`;</div>
<div class="line">          },</div>
<div class="line">          banner: (licenseFile) =&gt; {</div>
<div class="line">            return `License information can be found in ${licenseFile}`;</div>
<div class="line">          },</div>
<div class="line">        },</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><p><a class="anchor" id="autotoc_md25250"></a> </p><h5><code>condition</code></h5>
<p>Type:</p>
<div class="fragment"><div class="line">type condition =</div>
<div class="line">  | boolean</div>
<div class="line">  | &quot;all&quot;</div>
<div class="line">  | &quot;some&quot;</div>
<div class="line">  | RegExp</div>
<div class="line">  | ((</div>
<div class="line">      astNode: any,</div>
<div class="line">      comment: {</div>
<div class="line">        value: string;</div>
<div class="line">        type: &quot;comment1&quot; | &quot;comment2&quot; | &quot;comment3&quot; | &quot;comment4&quot;;</div>
<div class="line">        pos: number;</div>
<div class="line">        line: number;</div>
<div class="line">        col: number;</div>
<div class="line">      }</div>
<div class="line">    ) =&gt; boolean)</div>
<div class="line">  | undefined;</div>
</div><!-- fragment --><p>Condition what comments you need extract.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        extractComments: {</div>
<div class="line">          condition: &quot;some&quot;,</div>
<div class="line">          filename: (fileData) =&gt; {</div>
<div class="line">            // The &quot;fileData&quot; argument contains object with &quot;filename&quot;, &quot;basename&quot;, &quot;query&quot; and &quot;hash&quot;</div>
<div class="line">            return `${fileData.filename}.LICENSE.txt${fileData.query}`;</div>
<div class="line">          },</div>
<div class="line">          banner: (licenseFile) =&gt; {</div>
<div class="line">            return `License information can be found in ${licenseFile}`;</div>
<div class="line">          },</div>
<div class="line">        },</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><p><a class="anchor" id="autotoc_md25251"></a> </p><h5><code>filename</code></h5>
<p>Type:</p>
<div class="fragment"><div class="line">type filename = string | ((fileData: any) =&gt; string) | undefined;</div>
</div><!-- fragment --><p>Default: <code>[file].LICENSE.txt[query]</code></p>
<p>Available placeholders: <code>[file]</code>, <code>[query]</code> and <code>[filebase]</code> (<code>[base]</code> for webpack 5).</p>
<p>The file where the extracted comments will be stored. Default is to append the suffix <code>.LICENSE.txt</code> to the original filename.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Warning</b></p>
<p>We highly recommend using the <code>txt</code> extension. Using <code>js</code>/<code>cjs</code>/<code>mjs</code> extensions may conflict with existing assets which leads to broken code. </p>
</blockquote>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        extractComments: {</div>
<div class="line">          condition: /^\**!|@preserve|@license|@cc_on/i,</div>
<div class="line">          filename: &quot;extracted-comments.js&quot;,</div>
<div class="line">          banner: (licenseFile) =&gt; {</div>
<div class="line">            return `License information can be found in ${licenseFile}`;</div>
<div class="line">          },</div>
<div class="line">        },</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><p><a class="anchor" id="autotoc_md25252"></a> </p><h5><code>banner</code></h5>
<p>Type:</p>
<div class="fragment"><div class="line">type banner = string | boolean | ((commentsFile: string) =&gt; string) | undefined;</div>
</div><!-- fragment --><p>Default: <code>/*! For license information please see ${commentsFile} */</code></p>
<p>The banner text that points to the extracted file and will be added on top of the original file. Can be <code>false</code> (no banner), a <code>String</code>, or a <code>Function&lt;(string) -&gt; String&gt;</code> that will be called with the filename where extracted comments have been stored. Will be wrapped into comment.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        extractComments: {</div>
<div class="line">          condition: true,</div>
<div class="line">          filename: (fileData) =&gt; {</div>
<div class="line">            // The &quot;fileData&quot; argument contains object with &quot;filename&quot;, &quot;basename&quot;, &quot;query&quot; and &quot;hash&quot;</div>
<div class="line">            return `${fileData.filename}.LICENSE.txt${fileData.query}`;</div>
<div class="line">          },</div>
<div class="line">          banner: (commentsFile) =&gt; {</div>
<div class="line">            return `My custom banner about license information ${commentsFile}`;</div>
<div class="line">          },</div>
<div class="line">        },</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25253"></a>
Examples</h2>
<h3><a class="anchor" id="autotoc_md25254"></a>
Preserve Comments</h3>
<p>Extract all legal comments (i.e. <code>/^\**!|@preserve|@license|@cc_on/i</code>) and preserve <code>/@license/i</code> comments.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        terserOptions: {</div>
<div class="line">          format: {</div>
<div class="line">            comments: /@license/i,</div>
<div class="line">          },</div>
<div class="line">        },</div>
<div class="line">        extractComments: true,</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25255"></a>
Remove Comments</h3>
<p>If you avoid building with comments, use this config:</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        terserOptions: {</div>
<div class="line">          format: {</div>
<div class="line">            comments: false,</div>
<div class="line">          },</div>
<div class="line">        },</div>
<div class="line">        extractComments: false,</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25256"></a>
<a href="https://github.com/mishoo/UglifyJS"><code>uglify-js</code></a></h3>
<p><a href="https://github.com/mishoo/UglifyJS"><code>UglifyJS</code></a> is a JavaScript parser, minifier, compressor and beautifier toolkit.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        minify: TerserPlugin.uglifyJsMinify,</div>
<div class="line">        // `terserOptions` options will be passed to `uglify-js`</div>
<div class="line">        // Link to options - https://github.com/mishoo/UglifyJS#minify-options</div>
<div class="line">        terserOptions: {},</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25257"></a>
<a href="https://github.com/swc-project/swc"><code>swc</code></a></h3>
<p><a href="https://github.com/swc-project/swc"><code>swc</code></a> is a super-fast compiler written in rust; producing widely-supported javascript from modern standards and typescript.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Warning</b></p>
<p>the <code>extractComments</code> option is not supported and all comments will be removed by default, it will be fixed in future </p>
</blockquote>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        minify: TerserPlugin.swcMinify,</div>
<div class="line">        // `terserOptions` options will be passed to `swc` (`@swc/core`)</div>
<div class="line">        // Link to options - https://swc.rs/docs/config-js-minify</div>
<div class="line">        terserOptions: {},</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25258"></a>
<a href="https://github.com/evanw/esbuild"><code>esbuild</code></a></h3>
<p><a href="https://github.com/evanw/esbuild"><code>esbuild</code></a> is an extremely fast JavaScript bundler and minifier.</p>
<blockquote class="doxtable">
<p>&zwj;<b>Warning</b></p>
<p>the <code>extractComments</code> option is not supported and all legal comments (i.e. copyright, licenses and etc) will be preserved </p>
</blockquote>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        minify: TerserPlugin.esbuildMinify,</div>
<div class="line">        // `terserOptions` options will be passed to `esbuild`</div>
<div class="line">        // Link to options - https://esbuild.github.io/api/#minify</div>
<div class="line">        // Note: the `minify` options is true by default (and override other `minify*` options), so if you want to disable the `minifyIdentifiers` option (or other `minify*` options) please use:</div>
<div class="line">        // terserOptions: {</div>
<div class="line">        //   minify: false,</div>
<div class="line">        //   minifyWhitespace: true,</div>
<div class="line">        //   minifyIdentifiers: false,</div>
<div class="line">        //   minifySyntax: true,</div>
<div class="line">        // },</div>
<div class="line">        terserOptions: {},</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25259"></a>
Custom Minify Function</h3>
<p>Override default minify function - use <code>uglify-js</code> for minification.</p>
<p><b>webpack.config.js</b></p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        minify: (file, sourceMap) =&gt; {</div>
<div class="line">          // https://github.com/mishoo/UglifyJS2#minify-options</div>
<div class="line">          const uglifyJsOptions = {</div>
<div class="line">            /* your `uglify-js` package options */</div>
<div class="line">          };</div>
<div class="line"> </div>
<div class="line">          if (sourceMap) {</div>
<div class="line">            uglifyJsOptions.sourceMap = {</div>
<div class="line">              content: sourceMap,</div>
<div class="line">            };</div>
<div class="line">          }</div>
<div class="line"> </div>
<div class="line">          return require(&quot;uglify-js&quot;).minify(file, uglifyJsOptions);</div>
<div class="line">        },</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h3><a class="anchor" id="autotoc_md25260"></a>
Typescript</h3>
<p>With default terser minify function:</p>
<div class="fragment"><div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin({</div>
<div class="line">        terserOptions: {</div>
<div class="line">          compress: true,</div>
<div class="line">        },</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><p>With built-in minify functions:</p>
<div class="fragment"><div class="line">import type { JsMinifyOptions as SwcOptions } from &quot;@swc/core&quot;;</div>
<div class="line">import type { MinifyOptions as UglifyJSOptions } from &quot;uglify-js&quot;;</div>
<div class="line">import type { TransformOptions as EsbuildOptions } from &quot;esbuild&quot;;</div>
<div class="line">import type { MinifyOptions as TerserOptions } from &quot;terser&quot;;</div>
<div class="line"> </div>
<div class="line">module.exports = {</div>
<div class="line">  optimization: {</div>
<div class="line">    minimize: true,</div>
<div class="line">    minimizer: [</div>
<div class="line">      new TerserPlugin&lt;SwcOptions&gt;({</div>
<div class="line">        minify: TerserPlugin.swcMinify,</div>
<div class="line">        terserOptions: {</div>
<div class="line">          // `swc` options</div>
<div class="line">        },</div>
<div class="line">      }),</div>
<div class="line">      new TerserPlugin&lt;UglifyJSOptions&gt;({</div>
<div class="line">        minify: TerserPlugin.uglifyJsMinify,</div>
<div class="line">        terserOptions: {</div>
<div class="line">          // `uglif-js` options</div>
<div class="line">        },</div>
<div class="line">      }),</div>
<div class="line">      new TerserPlugin&lt;EsbuildOptions&gt;({</div>
<div class="line">        minify: TerserPlugin.esbuildMinify,</div>
<div class="line">        terserOptions: {</div>
<div class="line">          // `esbuild` options</div>
<div class="line">        },</div>
<div class="line">      }),</div>
<div class="line"> </div>
<div class="line">      // Alternative usage:</div>
<div class="line">      new TerserPlugin&lt;TerserOptions&gt;({</div>
<div class="line">        minify: TerserPlugin.terserMinify,</div>
<div class="line">        terserOptions: {</div>
<div class="line">          // `terser` options</div>
<div class="line">        },</div>
<div class="line">      }),</div>
<div class="line">    ],</div>
<div class="line">  },</div>
<div class="line">};</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25261"></a>
Contributing</h2>
<p>Please take a moment to read our contributing guidelines if you haven't yet done so.</p>
<p>CONTRIBUTING</p>
<h2><a class="anchor" id="autotoc_md25262"></a>
License</h2>
<p><a href="./LICENSE">MIT</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
