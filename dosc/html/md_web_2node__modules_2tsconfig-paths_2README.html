<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AREA: tsconfig-paths</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AREA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">tsconfig-paths</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md25927"></a> <a href="https://www.npmjs.com/package/tsconfig-paths"><img src="https://img.shields.io/npm/v/tsconfig-paths.svg?style=flat" alt="npm version" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/dividab/tsconfig-paths/actions/workflows/ci.yml?query=branch%3Amaster"><img src="https://github.com/dividab/tsconfig-paths/workflows/CI/badge.svg" alt="build" style="pointer-events: none;" class="inline"/></a> <a href="https://codecov.io/gh/dividab/tsconfig-paths"><img src="https://codecov.io/gh/dividab/tsconfig-paths/branch/master/graph/badge.svg" alt="Coverage Status" style="pointer-events: none;" class="inline"/></a> <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/github/license/dividab/tsconfig-paths.svg?style=flat" alt="MIT license" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/prettier/prettier"><img src="https://img.shields.io/badge/code_style-prettier-ff69b4.svg" alt="code style: prettier" style="pointer-events: none;" class="inline"/></a></p>
<p>Use this to load modules whose location is specified in the <code>paths</code> section of <code>tsconfig.json</code>. Both loading at run-time and via API are supported.</p>
<p>Typescript by default mimics the Node.js runtime resolution strategy of modules. But it also allows the use of <a href="https://www.typescriptlang.org/docs/handbook/module-resolution.html">path mapping</a> which allows arbitrary module paths (that doesn't start with "/" or ".") to be specified and mapped to physical paths in the filesystem. The typescript compiler can resolve these paths from <code>tsconfig</code> so it will compile OK. But if you then try to execute the compiled files with node (or ts-node), it will only look in the <code>node_modules</code> folders all the way up to the root of the filesystem and thus will not find the modules specified by <code>paths</code> in <code>tsconfig</code>.</p>
<p>If you require this package's <code>tsconfig-paths/register</code> module it will read the <code>paths</code> from <code>tsconfig.json</code> and convert node's module loading calls into to physical file paths that node can load.</p>
<h1><a class="anchor" id="autotoc_md25928"></a>
How to install</h1>
<div class="fragment"><div class="line">yarn add --dev tsconfig-paths</div>
</div><!-- fragment --><p>or</p>
<div class="fragment"><div class="line">npm install --save-dev tsconfig-paths</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md25929"></a>
How to use</h1>
<h2><a class="anchor" id="autotoc_md25930"></a>
With node</h2>
<p><code>node -r tsconfig-paths/register main.js</code></p>
<p>If <code>process.env.TS_NODE_BASEURL</code> is set it will override the value of <code>baseUrl</code> in tsconfig.json:</p>
<p><code>TS_NODE_BASEURL=./dist node -r tsconfig-paths/register main.js</code></p>
<h2><a class="anchor" id="autotoc_md25931"></a>
With ts-node</h2>
<p><code>ts-node -r tsconfig-paths/register main.ts</code></p>
<p>If <code>process.env.TS_NODE_PROJECT</code> is set it will be used to resolved tsconfig.json</p>
<h2><a class="anchor" id="autotoc_md25932"></a>
With webpack</h2>
<p>For webpack please use the <a href="https://github.com/dividab/tsconfig-paths-webpack-plugin">tsconfig-paths-webpack-plugin</a>.</p>
<h2><a class="anchor" id="autotoc_md25933"></a>
With mocha and ts-node</h2>
<p>As of Mocha &gt;= 4.0.0 the <code>--compiler</code> was <a href="https://github.com/mochajs/mocha/wiki/compilers-deprecation">deprecated</a>. Instead <code>--require</code> should be used. You also have to specify a glob that includes <code>.ts</code> files because mocha looks after files with <code>.js</code> extension by default.</p>
<div class="fragment"><div class="line">mocha -r ts-node/register -r tsconfig-paths/register &quot;test/**/*.ts&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25934"></a>
With other commands</h2>
<p>As long as the command has something similar to a <code>--require</code> option that can load a module before it starts, tsconfig-paths should be able to work with it.</p>
<h2><a class="anchor" id="autotoc_md25935"></a>
With <code>ts-node</code> and VSCode</h2>
<p>The following is an example configuration for the <code>.vscode/launch.json</code>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">  &quot;version&quot;: &quot;0.2.0&quot;,</div>
<div class="line">  &quot;configurations&quot;: [</div>
<div class="line">    {</div>
<div class="line">      &quot;name&quot;: &quot;Debug Functions&quot;,</div>
<div class="line">      &quot;request&quot;: &quot;launch&quot;,</div>
<div class="line">      &quot;type&quot;: &quot;node&quot;,</div>
<div class="line">      &quot;runtimeArgs&quot;: [</div>
<div class="line">        &quot;-r&quot;,</div>
<div class="line">        &quot;${workspaceFolder}/functions/node_modules/ts-node/register&quot;,</div>
<div class="line">        &quot;-r&quot;,</div>
<div class="line">        &quot;${workspaceFolder}/functions/node_modules/tsconfig-paths/register&quot;</div>
<div class="line">      ],</div>
<div class="line">      &quot;args&quot;: [&quot;${workspaceFolder}/functions/src/index.ts&quot;],</div>
<div class="line">      &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,</div>
<div class="line">      &quot;protocol&quot;: &quot;inspector&quot;,</div>
<div class="line">      &quot;env&quot;: {</div>
<div class="line">        &quot;NODE_ENV&quot;: &quot;development&quot;,</div>
<div class="line">        &quot;TS_NODE_PROJECT&quot;: &quot;${workspaceFolder}/functions/tsconfig.json&quot;</div>
<div class="line">      },</div>
<div class="line">      &quot;outFiles&quot;: [&quot;${workspaceFolder}/functions/lib/**/*.js&quot;]</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md25936"></a>
Bootstrapping with explicit params</h1>
<p>If you want more granular control over tsconfig-paths you can bootstrap it. This can be useful if you for instance have compiled with <code>tsc</code> to another directory where <code>tsconfig.json</code> doesn't exists.</p>
<p>For example, create a wrapper script called <code>tsconfig-paths-bootstrap.js</code> with the contents below:</p>
<div class="fragment"><div class="line">const tsConfig = require(&quot;./tsconfig.json&quot;);</div>
<div class="line">const tsConfigPaths = require(&quot;tsconfig-paths&quot;);</div>
<div class="line"> </div>
<div class="line">const baseUrl = &quot;./&quot;; // Either absolute or relative path. If relative it&#39;s resolved to current working directory.</div>
<div class="line">const cleanup = tsConfigPaths.register({</div>
<div class="line">  baseUrl,</div>
<div class="line">  paths: tsConfig.compilerOptions.paths,</div>
<div class="line">});</div>
<div class="line"> </div>
<div class="line">// When path registration is no longer needed</div>
<div class="line">cleanup();</div>
</div><!-- fragment --><p>Then run with:</p>
<p><code>node -r ./tsconfig-paths-bootstrap.js main.js</code></p>
<h1><a class="anchor" id="autotoc_md25937"></a>
Configuration Options</h1>
<p>You can set options by passing them before the script path, via programmatic usage or via environment variables.</p>
<div class="fragment"><div class="line">ts-node --project customLocation/tsconfig.json -r tsconfig-paths/register &quot;test/**/*.ts&quot;</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md25938"></a>
CLI and Programmatic Options</h2>
<p><em>Environment variable denoted in parentheses.</em></p>
<ul>
<li><code>-P, --project [path]</code> Path to TypeScript JSON project file (<code>TS_NODE_PROJECT</code>)</li>
</ul>
<h1><a class="anchor" id="autotoc_md25939"></a>
Config loading process</h1>
<ol type="1">
<li>Use explicit params passed to register</li>
<li>Use <code>process.env.TS_NODE_PROJECT</code> to resolve tsConfig.json and the specified baseUrl and paths.</li>
<li>Resolves tsconfig.json from current working directory and the specified baseUrl and paths.</li>
</ol>
<h1><a class="anchor" id="autotoc_md25940"></a>
Programmatic use</h1>
<p>The public API consists of these functions:</p>
<ul>
<li>register</li>
<li>loadConfig</li>
<li>createMatchPath / createMatchPathAsync</li>
<li>matchFromAbsolutePaths / matchFromAbsolutePathsAsync</li>
</ul>
<h2><a class="anchor" id="autotoc_md25941"></a>
register</h2>
<div class="fragment"><div class="line">export interface ExplicitParams {</div>
<div class="line">  baseUrl: string;</div>
<div class="line">  paths: { [key: string]: Array&lt;string&gt; };</div>
<div class="line">  mainFields?: Array&lt;string&gt;;</div>
<div class="line">  addMatchAll?: boolean;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">/**</div>
<div class="line"> * Installs a custom module load function that can adhere to paths in tsconfig.</div>
<div class="line"> */</div>
<div class="line">export function register(explicitParams: ExplicitParams): () =&gt; void;</div>
</div><!-- fragment --><p>This function will patch the node's module loading so it will look for modules in paths specified by tsconfig.json. A function is returned for you to reinstate Node's original module loading.</p>
<h2><a class="anchor" id="autotoc_md25942"></a>
loadConfig</h2>
<div class="fragment"><div class="line">export function loadConfig(cwd: string = process.cwd()): ConfigLoaderResult;</div>
<div class="line"> </div>
<div class="line">export type ConfigLoaderResult =</div>
<div class="line">  | ConfigLoaderSuccessResult</div>
<div class="line">  | ConfigLoaderFailResult;</div>
<div class="line"> </div>
<div class="line">export interface ConfigLoaderSuccessResult {</div>
<div class="line">  resultType: &quot;success&quot;;</div>
<div class="line">  absoluteBaseUrl: string;</div>
<div class="line">  paths: { [key: string]: Array&lt;string&gt; };</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">export interface ConfigLoaderFailResult {</div>
<div class="line">  resultType: &quot;failed&quot;;</div>
<div class="line">  message: string;</div>
<div class="line">}</div>
</div><!-- fragment --><p>This function loads the tsconfig.json. It will start searching from the specified <code>cwd</code> directory. Passing the tsconfig.json file directly instead of a directory also works.</p>
<h2><a class="anchor" id="autotoc_md25943"></a>
createMatchPath</h2>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * Function that can match a path</div>
<div class="line"> */</div>
<div class="line">export interface MatchPath {</div>
<div class="line">  (</div>
<div class="line">    requestedModule: string,</div>
<div class="line">    readJson?: Filesystem.ReadJsonSync,</div>
<div class="line">    fileExists?: (name: string) =&gt; boolean,</div>
<div class="line">    extensions?: ReadonlyArray&lt;string&gt;</div>
<div class="line">  ): string | undefined;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">/**</div>
<div class="line"> * Creates a function that can resolve paths according to tsconfig paths property.</div>
<div class="line"> * @param absoluteBaseUrl Absolute version of baseUrl as specified in tsconfig.</div>
<div class="line"> * @param paths The paths as specified in tsconfig.</div>
<div class="line"> * @param mainFields A list of package.json field names to try when resolving module files.</div>
<div class="line"> * @param addMatchAll Add a match-all &quot;*&quot; rule if none is present</div>
<div class="line"> * @returns a function that can resolve paths.</div>
<div class="line"> */</div>
<div class="line">export function createMatchPath(</div>
<div class="line">  absoluteBaseUrl: string,</div>
<div class="line">  paths: { [key: string]: Array&lt;string&gt; },</div>
<div class="line">  mainFields: string[] = [&quot;main&quot;],</div>
<div class="line">  addMatchAll: boolean = true</div>
<div class="line">): MatchPath {</div>
</div><!-- fragment --><p>The <code>createMatchPath</code> function will create a function that can match paths. It accepts <code>baseUrl</code> and <code>paths</code> directly as they are specified in tsconfig and will handle resolving paths to absolute form. The created function has the signature specified by the type <code>MatchPath</code> above.</p>
<h2><a class="anchor" id="autotoc_md25944"></a>
matchFromAbsolutePaths</h2>
<div class="fragment"><div class="line">/**</div>
<div class="line"> * Finds a path from tsconfig that matches a module load request.</div>
<div class="line"> * @param absolutePathMappings The paths to try as specified in tsconfig but resolved to absolute form.</div>
<div class="line"> * @param requestedModule The required module name.</div>
<div class="line"> * @param readJson Function that can read json from a path (useful for testing).</div>
<div class="line"> * @param fileExists Function that checks for existence of a file at a path (useful for testing).</div>
<div class="line"> * @param extensions File extensions to probe for (useful for testing).</div>
<div class="line"> * @param mainFields A list of package.json field names to try when resolving module files.</div>
<div class="line"> * @returns the found path, or undefined if no path was found.</div>
<div class="line"> */</div>
<div class="line">export function matchFromAbsolutePaths(</div>
<div class="line">  absolutePathMappings: ReadonlyArray&lt;MappingEntry.MappingEntry&gt;,</div>
<div class="line">  requestedModule: string,</div>
<div class="line">  readJson: Filesystem.ReadJsonSync = Filesystem.readJsonFromDiskSync,</div>
<div class="line">  fileExists: Filesystem.FileExistsSync = Filesystem.fileExistsSync,</div>
<div class="line">  extensions: Array&lt;string&gt; = Object.keys(require.extensions),</div>
<div class="line">  mainFields: string[] = [&quot;main&quot;]</div>
<div class="line">): string | undefined {</div>
</div><!-- fragment --><p>This function is lower level and requires that the paths as already been resolved to absolute form and sorted in correct order into an array.</p>
<h2><a class="anchor" id="autotoc_md25945"></a>
createMatchPathAsync</h2>
<p>This is the async version of <code>createMatchPath</code>. It has the same signature but with a callback parameter for the result.</p>
<h2><a class="anchor" id="autotoc_md25946"></a>
matchFromAbsolutePathsAsync</h2>
<p>This is the async version of <code>matchFromAbsolutePaths</code>. It has the same signature but with a callback parameter for the result.</p>
<h1><a class="anchor" id="autotoc_md25947"></a>
How to publish</h1>
<div class="fragment"><div class="line">yarn version --patch</div>
<div class="line">yarn version --minor</div>
<div class="line">yarn version --major</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
