<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AREA: MongoDB Node.js Driver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AREA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">MongoDB Node.js Driver</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md30925"></a> The official <a href="https://www.mongodb.com/">MongoDB</a> driver for Node.js.</p>
<p><b>Upgrading to version 6? Take a look at our <a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/etc/notes/CHANGES_6.0.0.md">upgrade guide here</a>!</b></p>
<h1><a class="anchor" id="autotoc_md30926"></a>
Quick Links</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Site   </th><th class="markdownTableHeadNone">Link    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Documentation   </td><td class="markdownTableBodyNone"><a href="https://www.mongodb.com/docs/drivers/node">www.mongodb.com/docs/drivers/node</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">API Docs   </td><td class="markdownTableBodyNone"><a href="https://mongodb.github.io/node-mongodb-native">mongodb.github.io/node-mongodb-native</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>npm</code> package   </td><td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/mongodb">www.npmjs.com/package/mongodb</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MongoDB   </td><td class="markdownTableBodyNone"><a href="https://www.mongodb.com">www.mongodb.com</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">MongoDB University   </td><td class="markdownTableBodyNone"><a href="https://learn.mongodb.com/catalog?labels=%5B%22Language%22%5D&amp;values=%5B%22Node.js%22%5D">learn.mongodb.com</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">MongoDB Developer Center   </td><td class="markdownTableBodyNone"><a href="https://www.mongodb.com/developer/languages/javascript/">www.mongodb.com/developer</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Stack Overflow   </td><td class="markdownTableBodyNone"><a href="https://stackoverflow.com/search?q=%28%5Btypescript%5D+or+%5Bjavascript%5D+or+%5Bnode.js%5D%29+and+%5Bmongodb%5D">stackoverflow.com</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Source Code   </td><td class="markdownTableBodyNone"><a href="https://github.com/mongodb/node-mongodb-native">github.com/mongodb/node-mongodb-native</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Upgrade to v6   </td><td class="markdownTableBodyNone"><a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/etc/notes/CHANGES_6.0.0.md">etc/notes/CHANGES_6.0.0.md</a>    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Contributing   </td><td class="markdownTableBodyNone"><a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/CONTRIBUTING.md">CONTRIBUTING.md</a>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Changelog   </td><td class="markdownTableBodyNone"><a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/HISTORY.md">HISTORY.md</a>   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md30927"></a>
Release Integrity</h2>
<p>Releases are created automatically and signed using the <a href="https://pgp.mongodb.com/node-driver.asc">Node team's GPG key</a>. This applies to the git tag as well as all release packages provided as part of a GitHub release. To verify the provided packages, download the key and import it using gpg:</p>
<div class="fragment"><div class="line">gpg --import node-driver.asc</div>
</div><!-- fragment --><p>The GitHub release contains a detached signature file for the NPM package (named <code>mongodb-X.Y.Z.tgz.sig</code>).</p>
<p>The following command returns the link npm package. </p><div class="fragment"><div class="line">npm view mongodb@vX.Y.Z dist.tarball</div>
</div><!-- fragment --><p>Using the result of the above command, a <code>curl</code> command can return the official npm package for the release.</p>
<p>To verify the integrity of the downloaded package, run the following command: </p><div class="fragment"><div class="line">gpg --verify mongodb-X.Y.Z.tgz.sig mongodb-X.Y.Z.tgz</div>
</div><!-- fragment --><p>&gt;[!Note] No verification is done when using npm to install the package. The contents of the Github tarball and npm's tarball are identical.</p>
<h2><a class="anchor" id="autotoc_md30928"></a>
Bugs / Feature Requests</h2>
<p>Think you’ve found a bug? Want to see a new feature in <code>node-mongodb-native</code>? Please open a case in our issue management tool, JIRA:</p>
<ul>
<li>Create an account and login <a href="https://jira.mongodb.org">jira.mongodb.org</a>.</li>
<li>Navigate to the NODE project <a href="https://jira.mongodb.org/browse/NODE">jira.mongodb.org/browse/NODE</a>.</li>
<li>Click <b>Create Issue</b> - Please provide as much information as possible about the issue type and how to reproduce it.</li>
</ul>
<p>Bug reports in JIRA for all driver projects (i.e. NODE, PYTHON, CSHARP, JAVA) and the Core Server (i.e. SERVER) project are <b>public</b>.</p>
<h2><a class="anchor" id="autotoc_md30929"></a>
Support / Feedback</h2>
<p>For issues with, questions about, or feedback for the Node.js driver, please look into our <a href="https://www.mongodb.com/docs/manual/support">support channels</a>. Please do not email any of the driver developers directly with issues or questions - you're more likely to get an answer on the <a href="https://community.mongodb.com/tags/c/drivers-odms-connectors/7/node-js-driver">MongoDB Community Forums</a>.</p>
<h2><a class="anchor" id="autotoc_md30930"></a>
Change Log</h2>
<p>Change history can be found in <a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/HISTORY.md"><code>HISTORY.md</code></a>.</p>
<h2><a class="anchor" id="autotoc_md30931"></a>
Compatibility</h2>
<p>The driver currently supports 3.6+ servers.</p>
<p>** 3.6 support is deprecated and support will be removed in a future version **</p>
<p>For exhaustive server and runtime version compatibility matrices, please refer to the following links:</p>
<ul>
<li><a href="https://www.mongodb.com/docs/drivers/node/current/compatibility/#mongodb-compatibility">MongoDB</a></li>
<li><a href="https://www.mongodb.com/docs/drivers/node/current/compatibility/#language-compatibility">NodeJS</a></li>
</ul>
<h3><a class="anchor" id="autotoc_md30932"></a>
Component Support Matrix</h3>
<p>The following table describes add-on component version compatibility for the Node.js driver. Only packages with versions in these supported ranges are stable when used in combination.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component   </th><th class="markdownTableHeadNone"><code>mongodb@3.x</code>   </th><th class="markdownTableHeadNone"><code>mongodb@4.x</code>   </th><th class="markdownTableHeadNone"><code>mongodb@5.x</code>   </th><th class="markdownTableHeadNone"><code>mongodb@&lt;6.12</code>   </th><th class="markdownTableHeadNone"><code>mongodb@&gt;=6.12</code>    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/bson">bson</a>   </td><td class="markdownTableBodyNone">^1.0.0   </td><td class="markdownTableBodyNone">^4.0.0   </td><td class="markdownTableBodyNone">^5.0.0   </td><td class="markdownTableBodyNone">^6.0.0   </td><td class="markdownTableBodyNone">^6.0.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/bson-ext">bson-ext</a>   </td><td class="markdownTableBodyNone">^1.0.0 || ^2.0.0   </td><td class="markdownTableBodyNone">^4.0.0   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">N/A    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/kerberos">kerberos</a>   </td><td class="markdownTableBodyNone">^1.0.0   </td><td class="markdownTableBodyNone">^1.0.0 || ^2.0.0   </td><td class="markdownTableBodyNone">^1.0.0 || ^2.0.0   </td><td class="markdownTableBodyNone">^2.0.1   </td><td class="markdownTableBodyNone">^2.0.1    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/mongodb-client-encryption">mongodb-client-encryption</a>   </td><td class="markdownTableBodyNone">^1.0.0   </td><td class="markdownTableBodyNone">^1.0.0 || ^2.0.0   </td><td class="markdownTableBodyNone">^2.3.0   </td><td class="markdownTableBodyNone">^6.0.0   </td><td class="markdownTableBodyNone">^6.0.0    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/mongodb-legacy">mongodb-legacy</a>   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">^4.0.0   </td><td class="markdownTableBodyNone">^5.0.0   </td><td class="markdownTableBodyNone">^6.0.0   </td><td class="markdownTableBodyNone">^6.0.0    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="https://www.npmjs.com/package/@mongodb-js/zstd">@mongodb-js/zstd</a>   </td><td class="markdownTableBodyNone">N/A   </td><td class="markdownTableBodyNone">^1.0.0   </td><td class="markdownTableBodyNone">^1.0.0   </td><td class="markdownTableBodyNone">^1.1.0   </td><td class="markdownTableBodyNone">^1.1.0 || ^2.0.0   </td></tr>
</table>
<h3><a class="anchor" id="autotoc_md30933"></a>
Typescript Version</h3>
<p>We recommend using the latest version of typescript, however we currently ensure the driver's public types compile against <code>typescript@4.4.0</code>. This is the lowest typescript version guaranteed to work with our driver: older versions may or may not work - use at your own risk. Since typescript <a href="https://github.com/Microsoft/TypeScript/wiki/Breaking-Changes">does not restrict breaking changes to major versions</a>, we consider this support best effort. If you run into any unexpected compiler failures against our supported TypeScript versions, please let us know by filing an issue on our <a href="https://jira.mongodb.org/browse/NODE">JIRA</a>.</p>
<p>Additionally, our Typescript types are compatible with the ECMAScript standard for our minimum supported Node version. Currently, our Typescript targets es2021.</p>
<h1><a class="anchor" id="autotoc_md30934"></a>
Installation</h1>
<p>The recommended way to get started using the Node.js 5.x driver is by using the <code>npm</code> (Node Package Manager) to install the dependency in your project.</p>
<p>After you've created your own project using <code>npm init</code>, you can run:</p>
<div class="fragment"><div class="line">npm install mongodb</div>
<div class="line"># or ...</div>
<div class="line">yarn add mongodb</div>
</div><!-- fragment --><p>This will download the MongoDB driver and add a dependency entry in your <code>package.json</code> file.</p>
<p>If you are a Typescript user, you will need the Node.js type definitions to use the driver's definitions:</p>
<div class="fragment"><div class="line">npm install -D @types/node</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md30935"></a>
Driver Extensions</h1>
<p>The MongoDB driver can optionally be enhanced by the following feature packages:</p>
<p>Maintained by MongoDB:</p>
<ul>
<li>Zstd network compression - <a href="https://github.com/mongodb-js/zstd">@mongodb-js/zstd</a></li>
<li>MongoDB field level and queryable encryption - <a href="https://github.com/mongodb/libmongocrypt#readme">mongodb-client-encryption</a></li>
<li>GSSAPI / SSPI / Kerberos authentication - <a href="https://github.com/mongodb-js/kerberos">kerberos</a></li>
</ul>
<p>Some of these packages include native C++ extensions. Consult the <a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/etc/notes/native-extensions.md">trouble shooting guide here</a> if you run into compilation issues.</p>
<p>Third party:</p>
<ul>
<li>Snappy network compression - <a href="https://github.com/Brooooooklyn/snappy">snappy</a></li>
<li>AWS authentication - <a href="https://github.com/aws/aws-sdk-js-v3/tree/main/packages/credential-providers">@aws-sdk/credential-providers</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md30936"></a>
Quick Start</h1>
<p>This guide will show you how to set up a simple application using Node.js and MongoDB. Its scope is only how to set up the driver and perform the simple CRUD operations. For more in-depth coverage, see the <a href="https://www.mongodb.com/docs/drivers/node/">official documentation</a>.</p>
<h2><a class="anchor" id="autotoc_md30937"></a>
Create the <code>package.json</code> file</h2>
<p>First, create a directory where your application will live.</p>
<div class="fragment"><div class="line">mkdir myProject</div>
<div class="line">cd myProject</div>
</div><!-- fragment --><p>Enter the following command and answer the questions to create the initial structure for your new project:</p>
<div class="fragment"><div class="line">npm init -y</div>
</div><!-- fragment --><p>Next, install the driver as a dependency.</p>
<div class="fragment"><div class="line">npm install mongodb</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md30938"></a>
Start a MongoDB Server</h2>
<p>For complete MongoDB installation instructions, see <a href="https://www.mongodb.com/docs/manual/installation/">the manual</a>.</p>
<ol type="1">
<li>Download the right MongoDB version from <a href="https://www.mongodb.org/downloads">MongoDB</a></li>
<li>Create a database directory (in this case under **/data**).</li>
<li>Install and start a <code>mongod</code> process.</li>
</ol>
<div class="fragment"><div class="line">mongod --dbpath=/data</div>
</div><!-- fragment --><p>You should see the <b>mongod</b> process start up and print some status information.</p>
<h2><a class="anchor" id="autotoc_md30939"></a>
Connect to MongoDB</h2>
<p>Create a new <b>app.js</b> file and add the following code to try out some basic CRUD operations using the MongoDB driver.</p>
<p>Add code to connect to the server and the database <b>myProject</b>:</p>
<blockquote class="doxtable">
<p>&zwj;<b>NOTE:</b> Resolving DNS Connection issues</p>
<p>Node.js 18 changed the default DNS resolution ordering from always prioritizing IPv4 to the ordering returned by the DNS provider. In some environments, this can result in <code>localhost</code> resolving to an IPv6 address instead of IPv4 and a consequent failure to connect to the server.</p>
<p>This can be resolved by:</p>
<ul>
<li>specifying the IP address family using the MongoClient <code>family</code> option (<code>MongoClient(&lt;uri&gt;, { family: 4 } )</code>)</li>
<li>launching mongod or mongos with the ipv6 flag enabled (<a href="https://www.mongodb.com/docs/manual/reference/program/mongod/#std-option-mongod.--ipv6">&ndash;ipv6 mongod option documentation</a>)</li>
<li>using a host of <code>127.0.0.1</code> in place of localhost</li>
<li>specifying the DNS resolution ordering with the <code>--dns-resolution-order</code> Node.js command line argument (e.g. <code>node --dns-resolution-order=ipv4first</code>) </li>
</ul>
</blockquote>
<div class="fragment"><div class="line">const { MongoClient } = require(&#39;mongodb&#39;);</div>
<div class="line">// or as an es module:</div>
<div class="line">// import { MongoClient } from &#39;mongodb&#39;</div>
<div class="line"> </div>
<div class="line">// Connection URL</div>
<div class="line">const url = &#39;mongodb://localhost:27017&#39;;</div>
<div class="line">const client = new MongoClient(url);</div>
<div class="line"> </div>
<div class="line">// Database Name</div>
<div class="line">const dbName = &#39;myProject&#39;;</div>
<div class="line"> </div>
<div class="line">async function main() {</div>
<div class="line">  // Use connect method to connect to the server</div>
<div class="line">  await client.connect();</div>
<div class="line">  console.log(&#39;Connected successfully to server&#39;);</div>
<div class="line">  const db = client.db(dbName);</div>
<div class="line">  const collection = db.collection(&#39;documents&#39;);</div>
<div class="line"> </div>
<div class="line">  // the following code examples can be pasted here...</div>
<div class="line"> </div>
<div class="line">  return &#39;done.&#39;;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">main()</div>
<div class="line">  .then(console.log)</div>
<div class="line">  .catch(console.error)</div>
<div class="line">  .finally(() =&gt; client.close());</div>
</div><!-- fragment --><p>Run your app from the command line with:</p>
<div class="fragment"><div class="line">node app.js</div>
</div><!-- fragment --><p>The application should print <b>Connected successfully to server</b> to the console.</p>
<h2><a class="anchor" id="autotoc_md30940"></a>
Insert a Document</h2>
<p>Add to <b>app.js</b> the following function which uses the <b>insertMany</b> method to add three documents to the <b>documents</b> collection.</p>
<div class="fragment"><div class="line">const insertResult = await collection.insertMany([{ a: 1 }, { a: 2 }, { a: 3 }]);</div>
<div class="line">console.log(&#39;Inserted documents =&gt;&#39;, insertResult);</div>
</div><!-- fragment --><p>The <b>insertMany</b> command returns an object with information about the insert operations.</p>
<h2><a class="anchor" id="autotoc_md30941"></a>
Find All Documents</h2>
<p>Add a query that returns all the documents.</p>
<div class="fragment"><div class="line">const findResult = await collection.find({}).toArray();</div>
<div class="line">console.log(&#39;Found documents =&gt;&#39;, findResult);</div>
</div><!-- fragment --><p>This query returns all the documents in the <b>documents</b> collection. If you add this below the insertMany example, you'll see the documents you've inserted.</p>
<h2><a class="anchor" id="autotoc_md30942"></a>
Find Documents with a Query Filter</h2>
<p>Add a query filter to find only documents which meet the query criteria.</p>
<div class="fragment"><div class="line">const filteredDocs = await collection.find({ a: 3 }).toArray();</div>
<div class="line">console.log(&#39;Found documents filtered by { a: 3 } =&gt;&#39;, filteredDocs);</div>
</div><!-- fragment --><p>Only the documents which match &lsquo;'a&rsquo; : 3` should be returned.</p>
<h2><a class="anchor" id="autotoc_md30943"></a>
Update a document</h2>
<p>The following operation updates a document in the <b>documents</b> collection.</p>
<div class="fragment"><div class="line">const updateResult = await collection.updateOne({ a: 3 }, { $set: { b: 1 } });</div>
<div class="line">console.log(&#39;Updated documents =&gt;&#39;, updateResult);</div>
</div><!-- fragment --><p>The method updates the first document where the field <b>a</b> is equal to <b>3</b> by adding a new field <b>b</b> to the document set to <b>1</b>. <code>updateResult</code> contains information about whether there was a matching document to update or not.</p>
<h2><a class="anchor" id="autotoc_md30944"></a>
Remove a document</h2>
<p>Remove the document where the field <b>a</b> is equal to <b>3</b>.</p>
<div class="fragment"><div class="line">const deleteResult = await collection.deleteMany({ a: 3 });</div>
<div class="line">console.log(&#39;Deleted documents =&gt;&#39;, deleteResult);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md30945"></a>
Index a Collection</h2>
<p><a href="https://www.mongodb.com/docs/manual/indexes/">Indexes</a> can improve your application's performance. The following function creates an index on the <b>a</b> field in the <b>documents</b> collection.</p>
<div class="fragment"><div class="line">const indexName = await collection.createIndex({ a: 1 });</div>
<div class="line">console.log(&#39;index name =&#39;, indexName);</div>
</div><!-- fragment --><p>For more detailed information, see the <a href="https://www.mongodb.com/docs/manual/applications/indexes/">indexing strategies page</a>.</p>
<h1><a class="anchor" id="autotoc_md30946"></a>
Error Handling</h1>
<p>If you need to filter certain errors from our driver, we have a helpful tree of errors described in <a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/etc/notes/errors.md">etc/notes/errors.md</a>.</p>
<p>It is our recommendation to use <code>instanceof</code> checks on errors and to avoid relying on parsing <code>error.message</code> and <code>error.name</code> strings in your code. We guarantee <code>instanceof</code> checks will pass according to semver guidelines, but errors may be sub-classed or their messages may change at any time, even patch releases, as we see fit to increase the helpfulness of the errors.</p>
<p>Any new errors we add to the driver will directly extend an existing error class and no existing error will be moved to a different parent class outside of a major release. This means <code>instanceof</code> will always be able to accurately capture the errors that our driver throws.</p>
<div class="fragment"><div class="line">const client = new MongoClient(url);</div>
<div class="line">await client.connect();</div>
<div class="line">const collection = client.db().collection(&#39;collection&#39;);</div>
<div class="line"> </div>
<div class="line">try {</div>
<div class="line">  await collection.insertOne({ _id: 1 });</div>
<div class="line">  await collection.insertOne({ _id: 1 }); // duplicate key error</div>
<div class="line">} catch (error) {</div>
<div class="line">  if (error instanceof MongoServerError) {</div>
<div class="line">    console.log(`Error worth logging: ${error}`); // special case for some reason</div>
<div class="line">  }</div>
<div class="line">  throw error; // still want to crash</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md30947"></a>
Nightly releases</h1>
<p>If you need to test with a change from the latest <code>main</code> branch, our <code>mongodb</code> npm package has nightly versions released under the <code>nightly</code> tag.</p>
<div class="fragment"><div class="line">npm install mongodb@nightly</div>
</div><!-- fragment --><p>Nightly versions are published regardless of testing outcome. This means there could be semantic breakages or partially implemented features. The nightly build is not suitable for production use.</p>
<h1><a class="anchor" id="autotoc_md30948"></a>
Next Steps</h1>
<ul>
<li><a href="https://www.mongodb.com/docs/manual/">MongoDB Documentation</a></li>
<li><a href="https://www.mongodb.com/docs/drivers/node/">MongoDB Node Driver Documentation</a></li>
<li><a href="https://www.mongodb.com/docs/manual/core/data-modeling-introduction/">Read about Schemas</a></li>
<li><a href="https://github.com/mongodb/node-mongodb-native">Star us on GitHub</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md30949"></a>
License</h1>
<p><a class="el" href="md_server_2node__modules_2mongodb_2LICENSE.html">Apache 2.0</a></p>
<p>© 2012-present MongoDB <a href="https://github.com/mongodb/node-mongodb-native/blob/HEAD/CONTRIBUTORS.md">Contributors</a> \ © 2009-2012 Christian Amor Kvalheim </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
