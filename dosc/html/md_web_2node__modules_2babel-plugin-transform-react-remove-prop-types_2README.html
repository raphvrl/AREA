<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AREA: babel-plugin-transform-react-remove-prop-types</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">AREA
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">babel-plugin-transform-react-remove-prop-types</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md5865"></a> </p><blockquote class="doxtable">
<p>&zwj;Remove unnecessary React propTypes from the production build. </p>
</blockquote>
<p><a href="https://www.npmjs.com/package/babel-plugin-transform-react-remove-prop-types"><img src="https://img.shields.io/npm/v/babel-plugin-transform-react-remove-prop-types.svg" alt="npm version" style="pointer-events: none;" class="inline"/></a> <a href="https://www.npmjs.com/package/babel-plugin-transform-react-remove-prop-types"><img src="https://img.shields.io/npm/dm/babel-plugin-transform-react-remove-prop-types.svg" alt="npm downloads" style="pointer-events: none;" class="inline"/></a> <a href="https://travis-ci.org/oliviertassinari/babel-plugin-transform-react-remove-prop-types"><img src="https://travis-ci.org/oliviertassinari/babel-plugin-transform-react-remove-prop-types.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a></p>
<p><a href="https://david-dm.org/oliviertassinari/babel-plugin-transform-react-remove-prop-types"><img src="https://img.shields.io/david/oliviertassinari/babel-plugin-transform-react-remove-prop-types.svg" alt="Dependencies" style="pointer-events: none;" class="inline"/></a> <a href="https://david-dm.org/oliviertassinari/babel-plugin-transform-react-remove-prop-types?type=dev"><img src="https://img.shields.io/david/dev/oliviertassinari/babel-plugin-transform-react-remove-prop-types.svg" alt="DevDependencies" style="pointer-events: none;" class="inline"/></a></p>
<h1><a class="anchor" id="autotoc_md5866"></a>
Installation</h1>
<div class="fragment"><div class="line">npm install --save-dev babel-plugin-transform-react-remove-prop-types</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5867"></a>
The problem solved</h1>
<p>Remove React <code>propTypes</code> from the production build, as they are only used in development. You can <b>save bandwidth</b> by removing them.</p>
<h1><a class="anchor" id="autotoc_md5868"></a>
Example</h1>
<p><b>In</b> </p><div class="fragment"><div class="line">const Baz = (props) =&gt; (</div>
<div class="line">  &lt;div {...props} /&gt;</div>
<div class="line">);</div>
<div class="line"> </div>
<div class="line">Baz.propTypes = {</div>
<div class="line">  className: PropTypes.string</div>
<div class="line">};</div>
</div><!-- fragment --><p><b>Out</b> </p><div class="fragment"><div class="line">const Baz = (props) =&gt; (</div>
<div class="line">  &lt;div {...props} /&gt;</div>
<div class="line">);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5869"></a>
With comment annotation</h2>
<p>The majority of cases should be addressed by default by this plugin.</p>
<p>In some cases, for example when using HOCs (High Order Components), like <em>react-redux</em>'s <code>connect</code>, or component inheritance (<a href="https://facebook.github.io/react/docs/composition-vs-inheritance.html">although it's NOT recommended</a>), a comment after the <code>propTypes</code> definition may be used to force the removal:</p>
<div class="fragment"><div class="line">Component.propTypes /* remove-proptypes */ = {}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5870"></a>
Usage</h1>
<h2><a class="anchor" id="autotoc_md5871"></a>
Via <code>.babelrc</code> (Recommended)</h2>
<p>**.babelrc**</p>
<p>without options: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;env&quot;: {</div>
<div class="line">    &quot;production&quot;: {</div>
<div class="line">      &quot;plugins&quot;: [&quot;transform-react-remove-prop-types&quot;]</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><p>with options: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;env&quot;: {</div>
<div class="line">    &quot;production&quot;: {</div>
<div class="line">      &quot;plugins&quot;: [</div>
<div class="line">        [&quot;transform-react-remove-prop-types&quot;, {</div>
<div class="line">          &quot;mode&quot;: &quot;wrap&quot;,</div>
<div class="line">          &quot;ignoreFilenames&quot;: [&quot;node_modules&quot;]</div>
<div class="line">        }]</div>
<div class="line">      ]</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5872"></a>
Via CLI</h2>
<div class="fragment"><div class="line">babel --plugins transform-react-remove-prop-types script.js</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5873"></a>
Via Node API</h2>
<p>without options: </p><div class="fragment"><div class="line">require(&#39;babel-core&#39;).transform(&#39;code&#39;, {</div>
<div class="line">  plugins: [</div>
<div class="line">    &#39;transform-react-remove-prop-types&#39;,</div>
<div class="line">  ],</div>
<div class="line">});</div>
</div><!-- fragment --><p>with options: </p><div class="fragment"><div class="line">require(&#39;babel-core&#39;).transform(&#39;code&#39;, {</div>
<div class="line">  plugins: [</div>
<div class="line">    [</div>
<div class="line">      &#39;transform-react-remove-prop-types&#39;,</div>
<div class="line">      {</div>
<div class="line">        mode: &#39;wrap&#39;,</div>
<div class="line">        ignoreFilenames: [&#39;node_modules&#39;],</div>
<div class="line">      },</div>
<div class="line">    ],</div>
<div class="line">  ],</div>
<div class="line">});</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5874"></a>
Options</h1>
<h2><a class="anchor" id="autotoc_md5875"></a>
<code>mode</code></h2>
<ul>
<li><code>remove</code> (default): the <code>propTypes</code> definitions are removed from the source code.</li>
<li><code>wrap</code>: the <code>propTypes</code> definitions are wrapped with the following code: <div class="fragment"><div class="line">Component.propTypes = process.env.NODE_ENV !== &quot;production&quot; ? {</div>
<div class="line">  // ...</div>
<div class="line">} : {};</div>
</div><!-- fragment --> Accessing <code>Component.propTypes.className</code> won't throw. It's a tradeoff between the size of the output file and the likelihood libraries like <a href="https://github.com/obipawan/react-native-hyperlink/pull/11">react-native-hyperlink</a> breaks.</li>
<li><code>unsafe-wrap</code>: the <code>propTypes</code> definitions are wrapped with the following code: <div class="fragment"><div class="line">if (process.env.NODE_ENV !== &quot;production&quot;) {</div>
<div class="line">  Component.propTypes = {</div>
<div class="line">    // ...</div>
<div class="line">  }</div>
<div class="line">}</div>
</div><!-- fragment --> Accessing <code>Component.propTypes.className</code> will throw.</li>
</ul>
<p>The <em>wrap</em> modes are targeting React libraries like <a href="https://github.com/callemall/material-ui">material-ui</a> or <a href="https://github.com/necolas/react-native-web">react-native-web</a>. They are not intended to be used by application authors.</p>
<h2><a class="anchor" id="autotoc_md5876"></a>
<code>removeImport</code></h2>
<ul>
<li><code>true</code>: the import statements are removed as well. This option only works if <code>mode</code> is set to <code>remove</code>: <div class="fragment"><div class="line">import PropTypes from &#39;prop-types&#39;</div>
</div><!-- fragment --></li>
<li><code>false</code> (default): does not remove the import statements.</li>
</ul>
<h2><a class="anchor" id="autotoc_md5877"></a>
<code>ignoreFilenames</code></h2>
<p>This filter generates a regular expression. Any filenames containing one of the array's strings will be ignored. By <b>default</b>, we match everything.</p>
<p>Following the Is it safe? section, you might encounter a component depending on the <code>propTypes</code> at runtime to work. For this reason, we provide an array options to filter out some files and folders. For instance, you can ignore all the npm modules: </p><div class="fragment"><div class="line">ignoreFilenames: [&#39;node_modules&#39;],</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5878"></a>
<code>additionalLibraries</code></h2>
<p>This option gives the possibility to remove other <code>propTypes</code> in addition to the canonical <code>prop-types</code>.</p>
<p>For instance, by default </p><div class="fragment"><div class="line">import PropTypes from &#39;prop-types&#39;</div>
<div class="line">import ImmutablePropTypes from &#39;react-immutable-proptypes&#39;</div>
</div><!-- fragment --><p> will result in the latter not to be removed, while with: </p><div class="fragment"><div class="line">additionalLibraries: [&#39;react-immutable-proptypes&#39;],</div>
</div><!-- fragment --><p> both will be removed.</p>
<h3><a class="anchor" id="autotoc_md5879"></a>
Regular expressions</h3>
<p>If you are using Babel 7 or newer and your config is stored in <a href="https://babeljs.io/docs/en/configuration#babelconfigjs"><code>babel.config.js</code></a>, you can also use a regular expression to describe modules, which should be removed.</p>
<p>This would be particularly useful when using custom prop types validators, implemented as part of your own source code. For example</p>
<div class="fragment"><div class="line">import CustomPropTypes from &#39;../../prop-types/my-own-validator&#39;</div>
<div class="line">import OtherCustomPropTypes from &#39;../../prop-types/my-other-validator&#39;</div>
</div><!-- fragment --><p>would be removed with the following setting</p>
<div class="fragment"><div class="line">additionalLibraries: [/\/prop-types\/.*$/]</div>
</div><!-- fragment --><p>If you use an index file</p>
<div class="fragment"><div class="line">import CustomPropTypes from &#39;../../prop-types&#39;</div>
</div><!-- fragment --><p>you could set it up as</p>
<div class="fragment"><div class="line">additionalLibraries: [/\/prop-types$/]</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5880"></a>
<code>classNameMatchers</code></h2>
<p>Use this option to enable this plugin to run on components that extend a class different than <code>React.Component</code> or <code>React.PureComponent</code>.</p>
<p>Given this example: </p><div class="fragment"><div class="line">class MyComponent extends BaseComponent {</div>
<div class="line">  ...</div>
<div class="line">}</div>
</div><!-- fragment --><p>You would use: </p><div class="fragment"><div class="line">classNameMatchers: [&quot;BaseComponent&quot;]</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md5881"></a>
<code>createReactClassName</code></h2>
<p>Use this option to set a custom name for the import of the <code>create-react-class</code> package that is different than <code>createReactClass</code>.</p>
<p>Given this example:</p>
<div class="fragment"><div class="line">import createClass from &#39;create-react-class&#39;;</div>
</div><!-- fragment --><p>You would use:</p>
<div class="fragment"><div class="line">createReactClassName: &#39;createClass&#39;</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md5882"></a>
Is it safe?</h1>
<p>If you are using the <code>propTypes</code> in a conventional way, i.e by using them to perform type checking on the properties, that plugin should be <b>safe to use</b>.</p>
<p>However, some libraries are accessing the <code>propTypes</code> on the component directly. For instance <a href="https://github.com/oblador/react-native-vector-icons/blob/3d1f2a5b7175d6e4c8985676940240776543ff60/lib/icon-button.js#L59">react-native-vector-icons</a> use them to split the properties between two components: </p><div class="fragment"><div class="line">const touchableProps = pick(restProps, Object.keys(TouchableHighlight.propTypes));</div>
</div><!-- fragment --><p> :warning: The plugin is breaking that code if it ends up removing <code>TouchableHighlight.propTypes</code>.</p>
<p>Make sure you are:</p><ul>
<li>Not using that pattern in your source code. If you do, explicitly <b>export</b> the <code>propTypes</code> to work around that limitation.</li>
<li>Not parsing the <code>node_modules</code>. If you do, test that your code is still working before shipping into production.</li>
</ul>
<p><a href="https://github.com/yannickcr/eslint-plugin-react/blob/master/docs/rules/forbid-foreign-prop-types.md">eslint-plugin-react has a rule forbid-foreign-prop-types</a> that can help you make this plugin safer to use.</p>
<h1><a class="anchor" id="autotoc_md5883"></a>
License</h1>
<p>MIT </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
